---
title: 浏览器缓存机制
date: 2018-07-03 10:14:25
tags:
---

### 浏览器http请求的流程
* 第一次请求
![avatar](/images/cache1.png)

* 再次请求
![avatar](/images/cache2.png)

### 两种缓存形式及判断标准
1. 强缓存
  * 解释：用户发送的请求，直接从客户端缓存中获取，不发送请求到服务器，不与服务器发生交互行为。
  * 判断标准：根据cache-control、expires判断，cache-control(http1.1标准)会覆盖expires(http1.0标准)
2. 协商缓存
  * 解释：用户发送的请求，发送到服务器后，由服务器判定是否从缓存中获取资源。
  * 判断标准：根据Etag和Last-modified判断
  * 其他：如果无更新会返回304状态码，如果有更新则返回最新的文件，且跟随返回最新的Etag和Last-modified

### 四个缓存判断字段的解释
|名称|含义|
| - | - |
|expires|过期时间点，服务器时间|
|cache-control|过期时长，可根据max-age指定过期时长|
|Etag|根据文件内容生成的字符串|
|Last-modified|文件修改时间|

### 问题及思考
1. expires 和 cache-control同时存在原因？
2. Etag 和 Last-modified同时存在的原因？
3. F5刷新（window-->F5；OSX-->command＋r）强缓存没了，浏览器怎么做的？
4. 强刷（window-->Ctrl+F5；OSX-->command＋shift＋r），浏览器怎么做的？
5. 为什么有时候刷新或者强刷后缓存还在？
6. 我只想某个文件不缓存，其他文件可缓存应该怎么操作？